<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC 	
	"-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="bookStoragePJ.mapper.MemberMapper">
<select id="autoNum" resultType="string">
select concat('mem', coalesce(max(substring(mem_num, 4)::integer), 1000) + 1) 
from members;
</select>

<insert id="memInsert" parameterType="mem">
insert into members(mem_num, mem_id, mem_pw, mem_name, mem_addr, mem_addr_detail, mem_post, mem_gender,
					mem_phone, mem_email, mem_email_conf, mem_birth, mem_regist, mem_point)
values(#{memNum}, #{memId}, #{memPw}, #{memName}, #{memAddr}, #{memAddrDetail}, #{memPost}, #{memGender}, #{memPhone},
		#{memEmail}, 'N', #{memBirth}, now(), 0)
</insert>
</mapper>